<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Trailerkarte</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, select, button { margin: 5px; }
  </style>
</head>
<body>
  <h1>üõª Trailerkarte</h1>

  <!-- Eingabefeld -->
  <input type="text" id="aufliegerInput" placeholder="Auflieger eingeben" />

  <!-- Buttons -->
  <button onclick="speichern()">Speichern</button>
  <button onclick="aendern()">√Ñndern</button>
  <button onclick="loeschen()">L√∂schen</button>

  <!-- Dropdown-Liste -->
  <h3>Gespeicherte Auflieger:</h3>
  <select id="aufliegerListe" size="5" onchange="aufliegerAuswahl()">
    <!-- Dynamisch gef√ºllt -->
  </select>

  <script>
    let aufliegerDaten = []; // Platzhalter f√ºr Daten aus Supabase
    let ausgew√§hlt = null;

    function laden() {
      // Hier sp√§ter Supabase-Daten abrufen
      // Beispiel-Daten:
      aufliegerDaten = ["ABC123", "XYZ789", "DEF456"];
      aktualisiereListe();
    }

    function aktualisiereListe() {
      const liste = document.getElementById("aufliegerListe");
      liste.innerHTML = "";
      aufliegerDaten.forEach((item, index) => {
        const option = document.createElement("option");
        option.text = item;
        option.value = index;
        liste.add(option);
      });
    }

    function aufliegerAuswahl() {
      const liste = document.getElementById("aufliegerListe");
      ausgew√§hlt = liste.value;
      document.getElementById("aufliegerInput").value = aufliegerDaten[ausgew√§hlt];
    }

    function speichern() {
      const neuer = document.getElementById("aufliegerInput").value;
      if (neuer) {
        aufliegerDaten.push(neuer);
        aktualisiereListe();
        document.getElementById("aufliegerInput").value = "";
        // Supabase: INSERT
      }
    }

    function aendern() {
      const neuer = document.getElementById("aufliegerInput").value;
      if (ausgew√§hlt !== null && neuer) {
        aufliegerDaten[ausgew√§hlt] = neuer;
        aktualisiereListe();
        // Supabase: UPDATE
      }
    }

    function loeschen() {
      if (ausgew√§hlt !== null) {
        aufliegerDaten.splice(ausgew√§hlt, 1);
        ausgew√§hlt = null;
        document.getElementById("aufliegerInput").value = "";
        aktualisiereListe();
        // Supabase: DELETE
      }
    }

    // Seite laden
    window.onload = laden;
  </script>
</body>
</html>
